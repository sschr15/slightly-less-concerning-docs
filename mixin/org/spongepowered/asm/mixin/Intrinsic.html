<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_201) on Sat Nov 09 19:22:04 GMT 2019 -->
<title>Intrinsic (Mixin 0.8.11 API)</title>
<meta name="date" content="2019-11-09">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Intrinsic (Mixin 0.8.11 API)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/spongepowered/asm/mixin/Interface.Remap.html" title="enum in org.spongepowered.asm.mixin"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/spongepowered/asm/mixin/Mixin.html" title="annotation in org.spongepowered.asm.mixin"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/spongepowered/asm/mixin/Intrinsic.html" target="_top">Frames</a></li>
<li><a href="Intrinsic.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Required&nbsp;|&nbsp;</li>
<li><a href="#annotation.type.optional.element.summary">Optional</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#annotation.type.element.detail">Element</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.spongepowered.asm.mixin</div>
<h2 title="Annotation Type Intrinsic" class="title">Annotation Type Intrinsic</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>@Target(value=METHOD)
 @Retention(value=CLASS)
public @interface <span class="memberNameLabel">Intrinsic</span></pre>
<div class="block">This annotation allows fine-tuning of the overwrite policy for a
 soft-implemented interface member method.
 
 <p>By default, all members within a mixin will overwrite (completely replace)
 matching methods in the target class without prejudice. However this can be
 a problem when soft-implementing an interface to deal with a method conflict
 because it may be desirable to only override the method <b>if it does not
 already exist</b> in the target, for example when running in a development
 environment.</p>
 
 <p>This annotation introduces two new behaviours for dealing with target
 methods which implement a soft interface intrinsically.</p>
 
 <p>Consider the following code:</p>
 
 <blockquote><pre>&#064;Shadow public int getSomething();
 
 public int soft$getSomething() {
     return this.getSomething();
 }</pre></blockquote>
 
 <p>This type of accessor is common when an interface conflict occurs, but has
 the problem that the injected accessor will be effectively self-referential
 in development, because the prefix will be removed and the accessor will thus
 cause a stack overflow.</p>
 
 <p>The only way to address this issue is to replace the shadow with a copy of
 the original accessor, like so:
 
 <blockquote><pre>&#064;Shadow private int something;
 
 public int soft$getSomething() {
     return this.something;
 }</pre></blockquote>
 
 <p>But this has the drawback of forcing the mixin to re-implement the target
 method, and thus forces ongoing maintenance of the mixin to include updating
 the contents of the accessor.</p>
 
 <p><code>Intrinsic</code> allows this problem to be circumvented in one of
 two ways. The first way essentially declares "don't merge this method if it
 already exists in the target". To use this behaviour, we simply tag our
 accessor with <a href="../../../../org/spongepowered/asm/mixin/Intrinsic.html" title="annotation in org.spongepowered.asm.mixin"><code>&#064;Intrinsic</code></a>:</p>
 
 <blockquote><pre>&#064;Shadow public int getSomething();
 
 &#064;Intrinsic // don't merge the method if the target already exists
 public int soft$getSomething() {
     return this.getSomething();
 }</pre></blockquote>
 
 <p>This is ideal if the accessor is simply providing a proxy through to an
 underlying obfuscated method, as in the example above. However, if the new
 method contains additional code, such as in this example:</p>
 
 <blockquote><pre>&#064;Shadow public int getSomething();
 
 public int soft$getSomething() {
     return this.someCondition ? this.someOtherValue : this.getSomething();
 }</pre></blockquote>
 
 <p>Then we still have the original problem that the method becomes re-entrant
 without specifying the additional Overwrite. We can solve this with the
 second <a href="../../../../org/spongepowered/asm/mixin/Intrinsic.html" title="annotation in org.spongepowered.asm.mixin"><code>Intrinsic</code></a> behaviour, and set the <a href="../../../../org/spongepowered/asm/mixin/Intrinsic.html#displace--"><code>displace()</code></a> argument to
 <code>true</code>. Setting <code>displace</code> instructs the mixin
 transformer to <em>proxy</em> the method call <em>if</em> the target already
 exists, but merge the method normally if it does not. This allows our new
 accessor to call the original method in all circumstances.</p>
 
 <p>When <code>displace</code> is enabled, if the target method exists then
 instead of being overwritten it is instead <em>renamed</em> with a temporary
 name and all references to the original method <em>within the Intrinsic
 method</em> are updated to call the renamed method. This means that all
 external code will still reference the Intrinsic accessor (just as it would
 have done with a regular overwrite) but code <em>within</em> the Intrinsic
 accessor will call the overwritten method.</p>
 
 <blockquote><pre>&#064;Shadow public int getSomething();
 
 &#064;Intrinsic(displace = true) // if the target already exists, displace it
 public int soft$getSomething() {
     return this.someCondition ? this.someOtherValue : this.getSomething();
 }</pre></blockquote></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== ANNOTATION TYPE OPTIONAL MEMBER SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="annotation.type.optional.element.summary">
<!--   -->
</a>
<h3>Optional Element Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Optional Element Summary table, listing optional elements, and an explanation">
<caption><span>Optional Elements</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Optional Element and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/spongepowered/asm/mixin/Intrinsic.html#displace--">displace</a></span></code>
<div class="block">If set to true, this intrinsic method will replace any existing method in
 the target class by renaming it and updating internal references inside
 the method to reference the displaced method.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ ANNOTATION TYPE MEMBER DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="annotation.type.element.detail">
<!--   -->
</a>
<h3>Element Detail</h3>
<a name="displace--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>displace</h4>
<pre>public abstract&nbsp;boolean&nbsp;displace</pre>
<div class="block">If set to true, this intrinsic method will replace any existing method in
 the target class by renaming it and updating internal references inside
 the method to reference the displaced method. If false or omitted,
 instructs this intrinsic method to <b>not</b> overwrite the target method
 if it exists, contrary to the normal behaviour for mixins</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if this intrinsic method should displace matching targets</dd>
</dl>
<dl>
<dt>Default:</dt>
<dd>false</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/spongepowered/asm/mixin/Interface.Remap.html" title="enum in org.spongepowered.asm.mixin"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/spongepowered/asm/mixin/Mixin.html" title="annotation in org.spongepowered.asm.mixin"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/spongepowered/asm/mixin/Intrinsic.html" target="_top">Frames</a></li>
<li><a href="Intrinsic.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Required&nbsp;|&nbsp;</li>
<li><a href="#annotation.type.optional.element.summary">Optional</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#annotation.type.element.detail">Element</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
